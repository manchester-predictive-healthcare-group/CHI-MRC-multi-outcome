<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Primarily used internally, this function has been exported to allow users to reproduce results in the vignette when
estimating confidence intervals using bootstrapping manually.
Fits a cox proportional hazards model to individuals in a landmark cohort, predicting the probability of being censored
at time t.eval. This landmark cohort may either be all individuals uncensored at time s, or those uncensored
and in state j at time s. All predictors in w.covs are assumed to have a linear effect on the hazard.
Weights are estimated for all individuals in data.raw, even if they will not be used in the analysis as they do not meet the landmarking
requirements. If an individual enters an absorbing state prior to t.eval, we estimate the probability of being censored
before the time of entry into the absorbing state, rather than at t.eval. Details on this are provided in the associated vignette."><title>Calculate inverse probability of censoring weights at time t.eval for a landmark group of individuals. — calc_weights • calibmsm</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Calculate inverse probability of censoring weights at time t.eval for a landmark group of individuals. — calc_weights"><meta property="og:description" content="Primarily used internally, this function has been exported to allow users to reproduce results in the vignette when
estimating confidence intervals using bootstrapping manually.
Fits a cox proportional hazards model to individuals in a landmark cohort, predicting the probability of being censored
at time t.eval. This landmark cohort may either be all individuals uncensored at time s, or those uncensored
and in state j at time s. All predictors in w.covs are assumed to have a linear effect on the hazard.
Weights are estimated for all individuals in data.raw, even if they will not be used in the analysis as they do not meet the landmarking
requirements. If an individual enters an absorbing state prior to t.eval, we estimate the probability of being censored
before the time of entry into the absorbing state, rather than at t.eval. Details on this are provided in the associated vignette."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">calibmsm</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/overview.html">calibmsm: An R package for calibration plots of a multistate model using inverse probability of censoring weights</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Calculate inverse probability of censoring weights at time <code>t.eval</code> for a landmark group of individuals.</h1>
      
      <div class="d-none name"><code>calc_weights.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Primarily used internally, this function has been exported to allow users to reproduce results in the vignette when
estimating confidence intervals using bootstrapping manually.</p>
<p>Fits a cox proportional hazards model to individuals in a landmark cohort, predicting the probability of being censored
at time <code>t.eval</code>. This landmark cohort may either be all individuals uncensored at time <code>s</code>, or those uncensored
and in state <code>j</code> at time <code>s</code>. All predictors in <code>w.covs</code> are assumed to have a linear effect on the hazard.
Weights are estimated for all individuals in <code>data.raw</code>, even if they will not be used in the analysis as they do not meet the landmarking
requirements. If an individual enters an absorbing state prior to <code>t.eval</code>, we estimate the probability of being censored
before the time of entry into the absorbing state, rather than at <code>t.eval</code>. Details on this are provided in the associated vignette.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">calc_weights</span><span class="op">(</span></span>
<span>  <span class="va">data.mstate</span>,</span>
<span>  <span class="va">data.raw</span>,</span>
<span>  <span class="va">covs</span>,</span>
<span>  <span class="va">t.eval</span>,</span>
<span>  <span class="va">s</span>,</span>
<span>  landmark.type <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  j <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  max.weight <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  stabilised <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  max.follow <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>data.mstate</dt>
<dd><p>Validation data in msdata format</p></dd>


<dt>data.raw</dt>
<dd><p>Validation data in data.frame (one row per individual)</p></dd>


<dt>covs</dt>
<dd><p>Character vector of variable names to adjust for when calculating inverse probability of censoring weights</p></dd>


<dt>t.eval</dt>
<dd><p>Follow up time at which to calculate weights</p></dd>


<dt>s</dt>
<dd><p>Landmark time at which predictions were made</p></dd>


<dt>landmark.type</dt>
<dd><p>Whether weights are estimated in all individuals uncensored at time s ('all') or only in individuals uncensored and in state j at time s ('state')</p></dd>


<dt>j</dt>
<dd><p>Landmark state at which predictions were made (only required in landmark.type = 'state')</p></dd>


<dt>max.weight</dt>
<dd><p>Maximum bound for weights</p></dd>


<dt>stabilised</dt>
<dd><p>Indicates whether weights should be stabilised or not</p></dd>


<dt>max.follow</dt>
<dd><p>Maximum follow up for model calculating inverse probability of censoring weights. Reducing this to <code>t.eval</code> + 1 may aid in the proportional hazards assumption being met in this model.</p></dd>

</dl></div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Alexander Pate.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

